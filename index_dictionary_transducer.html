<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="style_dict_1.css">
		<title>Yupigestun Sangaawa/Ivaghilghiit Naalkenaaghaat</title>
		<script type="text/javascript" src = "dictionary_js/fileread_search.js"></script>
		<script type="text/javascript" src = "dictionary_js/ipa_cyrillic.js"></script>
		<script type="text/javascript" src = "dictionary_js/foma_apply_down.js"></script>
		<script type="text/javascript" src = "dictionary_js/transducer.js"></script>
		<script type="text/javascript" src = "dictionary_js/cyrillic_convert.js"></script>

		<!--Icon set created by Lane Schwartz (lanes@illinois.edu)-->
<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
<link rel="manifest" href="icons/site.webmanifest">
<link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#50b5c2">
<meta name="msapplication-TileColor" content="#b0e0e6">
<meta name="theme-color" content="#b0e0e6">
	</head>
	<body>

		<div class="grid">
			<div class="title"><h1>Ivaghilghiit Naalkenaaghaat</h1></div>
			<div class="nav">
				<div class="box util"><a href="index_utilities.html"><img src="icons/utilities_icon_small.png"></a></div>
				<div class="box dict"><a href="index_dictionary_1.html"><img src="icons/book_icon_small.png"></a></div>
				<div class="box map"><a href="index_template.html"><img src="icons/map_icon_small.png"></a></div>
				<div class="box vid"><a href="index_template.html"><img src="icons/play_icon_small.png"></a></div>
				<div class="box disc"><a href="index_template.html"><img src="icons/chat_icon_small.png"></a></div>
				<div class="box info"><a href="index_info.html"><img src="icons/info_icon_small.png"></a></div>
				<div class="box home"><a href="index_main.html"><img src="icons/home_icon.png"></a></div>
			</div>
			<div class="header"><h2>St. Lawrence Island / Central Siberian Yupik Dictionary</h2></div>
			<div class="content">
				<div class="alpha">
					<input type="radio" class="rad" name="alpha" id="A"><a id="A_cont"><label for="A">A</label></a>

					<input type="radio" class="rad" name="alpha" id="E"><a><label for="E">E</label></a>

					<input type="radio" class="rad" name="alpha" id="F"><a><label for="F">F</label></a>

					<input type="radio" class="rad" name="alpha" id="G"><a><label for="G">G</label></a>

					<input type="radio" class="rad" name="alpha" id="GG"><a><label for="GG">GG</label></a>

					<input type="radio" class="rad" name="alpha" id="GH"><a><label for="GH">GH</label></a>

					<input type="radio" class="rad" name="alpha" id="GHH"><a><label for="GHH">GHH</label></a>

					<input type="radio" class="rad" name="alpha" id="H"><a><label for="H">H</label></a>

					<input type="radio" class="rad" name="alpha" id="I"><a><label for="I">I</label></a>

					<input type="radio" class="rad" name="alpha" id="K"><a><label for="K">K</label></a>

					<input type="radio" class="rad" name="alpha" id="L"><a><label for="L">L</label></a>

					<input type="radio" class="rad" name="alpha" id="LL"><a><label for="LL">LL</label></a>

					<input type="radio" class="rad" name="alpha" id="M"><a><label for="M">M</label></a>

					<input type="radio" class="rad" name="alpha" id="MM"><a><label for="MM">MM</label></a>

					<input type="radio" class="rad" name="alpha" id="N"><a id="N_cont"><label for="N">N</label></a>

					<input type="radio" class="rad" name="alpha" id="NN"><a><label for="NN">NN</label></a>

					<input type="radio" class="rad" name="alpha" id="NG"><a><label for="NG">NG</label></a>

					<input type="radio" class="rad" name="alpha" id="NGNG"><a><label for="NGNG">NGNG</label></a>

					<input type="radio" class="rad" name="alpha" id="P"><a><label for="P">P</label></a>

					<input type="radio" class="rad" name="alpha" id="Q"><a><label for="Q">Q</label></a>

					<input type="radio" class="rad" name="alpha" id="R"><a><label for="R">R</label></a>

					<input type="radio" class="rad" name="alpha" id="RR"><a><label for="RR">RR</label></a>

					<input type="radio" class="rad" name="alpha" id="S"><a><label for="S">S</label></a>

					<input type="radio" class="rad" name="alpha" id="T"><a><label for="T">T</label></a>

					<input type="radio" class="rad" name="alpha" id="U"><a><label for="U">U</label></a>

					<input type="radio" class="rad" name="alpha" id="V"><a><label for="V">V</label></a>

					<input type="radio" class="rad" name="alpha" id="W"><a><label for="W">W</label></a>

					<input type="radio" class="rad" name="alpha" id="WH"><a><label for="WH">WH</label></a>

					<input type="radio" class="rad" name="alpha" id="Y"><a><label for="Y">Y</label></a>

					<input type="radio" class="rad" name="alpha" id="Z"><a><label for="Z">Z</label></a>
				</div>
				<div class="input_cont">
					<input type="text" name = "field1" id = "field1" placeholder = "Enter Search" autocomplete="off"></input>
				</div>
				<div class="filter">
					<div class="y_e_cont">
							<input type="radio" id="yupikToEnglish" name="direction" value="y_e" class="button y_e" checked>
						<a>
							<label for="yupikToEnglish">Yupik-English</label>
						</a>
					</div>
					<div class="e_y_cont">
							<input type="radio" id="englishToYupik" name="direction" value="e_y" class="button e_y">
						<a>
							<label for="englishToYupik">English-Yupik</label>
						</a>
					</div>
					<div class="cyr_cont">
							<input type="checkbox" id="showCyrillic" class="button cyrillic">
						<a>
							<label for="showCyrillic">Show Cyrillic</label>
						</a>
					</div>
					<div class="ipa_cont">
							<input type="checkbox" id="showIPA" class="button ipa">
						<a>
							<label for="showIPA">Show IPA</label>
						</a>
					</div>
				</div>
				<div class="search_cont">
					<div class="search">
						<a>
							<button type="submit" value="submit" id = "search" class = "button"></button>
							<label for="search">Search</label>
						</a>
					</div>
				</div>

				<div id = "output" class="output" style = "width: 100%"></div>

			</div>
			<div class="footer">
				<div class="box one">Contact</div>
				<div class="box two">Contribute</div>
			</div>
		</div>
		<script>

		document.getElementById("search").addEventListener("click", function () {
			var userInputRaw = document.getElementById("field1").value;
				
			//This search is for matching nouns in absolutive
			userInput = cyrillic_to_latin(userInputRaw);

			var result = foma_apply_down(myNet, userInput);

			if (result === undefined || result.length == 0) {
				var foundEntries = search("dummy", document.getElementById("field1").value)
				alert(foundEntries[0])
			}

		else {

                   /*
        	   token is a 2D array
                     ------------------------------------------------------
                     base1 | postbase11 | postbase22 | infl1      |       |
        	     ------------------------------------------------------
                     base2 | postbase21 | postbase22 | postbase23 | infl2 |
        	     ------------------------------------------------------
                     base3 | infl3      |            |            |       |
                     ------------------------------------------------------
        	   */


        	    var token = new Array;

        	    for (var i = 0; i < result.length; i++) {
        		/*
        		morphemes is a 1D array
        		  -----------------------------------------
        		  base | postbase | ... | postbase | infl |
        		  -----------------------------------------
        	        */

        	        var morphemes = new Array;

        		/*
        		inflNotSplit is a 1D array
        		  ---------------------------------------
        		  base | postbase | ... | postbase+infl |
        		  ---------------------------------------
        		*/

        		var inflNotSplit = result[i].split("-");

        		// splits the [N] or [V] inflection tags
        		// from the postbase it's attached to
                        var inflSplit = new Array;
        		for (var m = 0; m < inflNotSplit.length; m++) {
                            if (inflNotSplit[m].includes("[N]")) {
        	                inflSplit = inflNotSplit[m].split("[N]");
        			tmp = morphemes.concat(inflSplit);
        			morphemes = tmp;
        		    }
                            else if (inflNotSplit[m].includes("[V]")) {
        	                inflSplit = inflNotSplit[m].split("[V]");
        			tmp = morphemes.concat(inflSplit);
        			morphemes = tmp;
        		    }
        	            else {
        		        morphemes.push(inflNotSplit[m]);
        		    }
        	        }
                        token.push(morphemes)
        	    }

                    // array to hold all morphophonological symbols
                    var symbols = ["~", "â€“", ")"];

		    var allOutput = new Array;

                    for (var m = 0; m < token[0].length; m++) {
                        searchToken = token[0][m].split("[")[0];

			for (var s = 0; s < symbols.length; s++) {
                            symSplit = searchToken.split(symbols[s]);
                            searchToken = symSplit[symSplit.length - 1];
                        }

		        if (searchToken.charAt(0) == "f") {
		            var tmp = searchToken;
			    searchToken = tmp.charAt(0) + "+"  + tmp.substr(1);
                        }

			if (searchToken != "") {
			    var foundEntries = search(searchToken, userInput);

			    for (var e = 0; e < foundEntries.length; e++) {
		                allOutput.push(foundEntries[e]);
			    }
		        }
                    }

		    for (var i = 0; i < allOutput.length;  i++) {
	                printEntry(allOutput[i]);
	            }
        	}
            });

            document.addEventListener('keypress', function (e) {
                var key = e.which || e.keyCode;
                if (key === 13) {
                    var userInput = document.getElementById("field1").value;

                    //This search is for matching nouns in absolutive
                    var result = foma_apply_down(myNet, userInput);

                    if (typeof result[0] == "undefined") {
                        search(result[0], document.getElementById("field1").value)
                    }

                    else {
                       /*
                       token is a 2D array
                         ------------------------------------------------------
                         base1 | postbase11 | postbase22 | infl1      |       |
                         ------------------------------------------------------
                         base2 | postbase21 | postbase22 | postbase23 | infl2 |
                         ------------------------------------------------------
                         base3 | infl3      |            |            |       |
                         ------------------------------------------------------
                       */

                       var token = new Array;

                       for (var i = 0; i < result.length; i++) {
                           /*
                           morphemes is a 1D array
                             -----------------------------------------
                             base | postbase | ... | postbase | infl |
                             -----------------------------------------
                           */

                           var morphemes = new Array;

                           /*
                           inflNotSplit is a 1D array
                             ---------------------------------------
                             base | postbase | ... | postbase+infl |
                             ---------------------------------------
                           */

                           var inflNotSplit = result[i].split("-");

                           // splits the [N] or [V] inflection tags
                           // from the postbase it's attached to
                           var inflSplit = new Array;

                           for (var m = 0; m < inflNotSplit.length; m++) {
                               if (inflNotSplit[m].includes("[N]")) {
                                   inflSplit = inflNotSplit[m].split("[N]");
                                   tmp = morphemes.concat(inflSplit);
                                   morphemes = tmp;
                               }

                               else if (inflNotSplit[m].includes("[V]")) {
                                   inflSplit = inflNotSplit[m].split("[V]");
                                   tmp = morphemes.concat(inflSplit);
                                   morphemes = tmp;
                               }

                               else {
                                   morphemes.push(inflNotSplit[m]);
                               }
                           }
                           token.push(morphemes)
                       }

                       search(token[0][0], userInput);
                    }
                }
            }); // end event-listener

			 var radio = document.getElementsByName("alpha");
			 for(var i=0; i<radio.length; i++) {
				radio[i].addEventListener("click", alpha);
			 }

		</script>
	</body>

</html>
